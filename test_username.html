<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Username Functionality Tests</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f5f5f5;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #333;
        text-align: center;
      }

      .test-controls {
        margin: 20px 0;
        text-align: center;
      }

      button {
        padding: 10px 20px;
        background-color: #4361ee;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin: 0 10px;
      }

      button:hover {
        background-color: #3a56d4;
      }

      #testResults {
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: #f9f9f9;
        white-space: pre-wrap;
        font-family: monospace;
        max-height: 400px;
        overflow-y: auto;
      }

      .test-section {
        margin-bottom: 20px;
      }

      .test-section h2 {
        color: #555;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
      }

      .test-item {
        margin: 10px 0;
        padding: 10px;
        border-left: 4px solid #ddd;
      }

      .test-item.pass {
        border-left-color: #4caf50;
        background-color: #f1f8e9;
      }

      .test-item.fail {
        border-left-color: #f44336;
        background-color: #ffebee;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Username Functionality Tests</h1>

      <div class="test-controls">
        <button id="runAllTests">Run All Tests</button>
        <button id="clearResults">Clear Results</button>
      </div>

      <div id="testResults">Test results will appear here...</div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCcJmrK_ctL2kj9-w6C-YFJ2RGdXgn_-KI",
        authDomain: "teamtodolist-a126a.firebaseapp.com",
        databaseURL:
          "https://teamtodolist-a126a-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "teamtodolist-a126a",
        storageBucket: "teamtodolist-a126a.appspot.com",
        messagingSenderId: "497218007909",
        appId: "1:497218007909:web:8cabf0a05ae7801909278c",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Override console.log to display in the test results div
      const originalConsoleLog = console.log;
      console.log = function () {
        const args = Array.from(arguments);
        const message = args.join(" ");

        // Add to test results div
        const testResults = document.getElementById("testResults");

        // Format the message with colors based on test status
        let formattedMessage = message;
        if (message.includes("✅ PASSED")) {
          formattedMessage = `<div class="test-item pass">${message}</div>`;
        } else if (message.includes("❌ FAILED")) {
          formattedMessage = `<div class="test-item fail">${message}</div>`;
        } else if (message.startsWith("===")) {
          formattedMessage = `<h2>${message}</h2>`;
        } else if (message.startsWith("---")) {
          formattedMessage = `<h3>${message}</h3>`;
        } else {
          formattedMessage = `<div>${message}</div>`;
        }

        testResults.innerHTML += formattedMessage;

        // Also log to the original console
        originalConsoleLog.apply(console, args);
      };

      // Button event listeners
      document
        .getElementById("runAllTests")
        .addEventListener("click", function () {
          document.getElementById("testResults").innerHTML = "";
          // The test script will automatically run when loaded
          const script = document.createElement("script");
          script.src = "js/test_username.js";
          document.body.appendChild(script);
        });

      document
        .getElementById("clearResults")
        .addEventListener("click", function () {
          document.getElementById("testResults").innerHTML =
            "Test results will appear here...";
        });
    </script>
  </body>
</html>
